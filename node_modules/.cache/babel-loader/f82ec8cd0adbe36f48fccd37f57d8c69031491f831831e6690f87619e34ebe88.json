{"ast":null,"code":"var _jsxFileName = \"/Users/viyondpay/opensource/dynamic_decision/front/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  // 修改数据结构：每个规则拥有自己的决策\n  const [rules, setRules] = useState([{\n    id: 1,\n    name: '规则1',\n    expression: 'age >= 18',\n    decisions: [{\n      id: 1,\n      name: '规则1决策',\n      actions: [{\n        type: 'SET',\n        key: 'result',\n        value: 'true',\n        target: 'ML_DECISION'\n      }]\n    }]\n  }, {\n    id: 2,\n    name: '规则2',\n    expression: 'age <= 18',\n    decisions: [{\n      id: 2,\n      name: '规则2决策',\n      actions: [{\n        type: 'SET',\n        key: 'result',\n        value: 'false',\n        target: 'ML_DECISION'\n      }, {\n        type: 'INCR',\n        key: 'key',\n        value: 'Value'\n      }]\n    }]\n  }]);\n  const [testInput, setTestInput] = useState('{ \"age\": 28 }');\n  const [testResult, setTestResult] = useState(null);\n  const [showTestResult, setShowTestResult] = useState(false);\n  const [resultTrace, setResultTrace] = useState([]);\n\n  // 更新规则表达式\n  const handleRuleExpressionChange = (id, value) => {\n    setRules(rules.map(rule => rule.id === id ? {\n      ...rule,\n      expression: value\n    } : rule));\n  };\n\n  // 更新规则名称\n  const updateRuleName = (id, name) => {\n    setRules(rules.map(rule => rule.id === id ? {\n      ...rule,\n      name\n    } : rule));\n  };\n\n  // 处理动作变更\n  const handleActionChange = (ruleId, decisionId, actionIndex, field, value) => {\n    setRules(rules.map(rule => {\n      if (rule.id === ruleId) {\n        const updatedDecisions = rule.decisions.map(decision => {\n          if (decision.id === decisionId) {\n            const updatedActions = [...decision.actions];\n            updatedActions[actionIndex] = {\n              ...updatedActions[actionIndex],\n              [field]: value\n            };\n            return {\n              ...decision,\n              actions: updatedActions\n            };\n          }\n          return decision;\n        });\n        return {\n          ...rule,\n          decisions: updatedDecisions\n        };\n      }\n      return rule;\n    }));\n  };\n\n  // 添加新的决策动作\n  const addNewDecisionAction = (ruleId, decisionId) => {\n    setRules(rules.map(rule => {\n      if (rule.id === ruleId) {\n        const updatedDecisions = rule.decisions.map(decision => {\n          if (decision.id === decisionId) {\n            return {\n              ...decision,\n              actions: [...decision.actions, {\n                type: 'SET',\n                key: '',\n                value: '',\n                target: 'ML_DECISION'\n              }]\n            };\n          }\n          return decision;\n        });\n        return {\n          ...rule,\n          decisions: updatedDecisions\n        };\n      }\n      return rule;\n    }));\n  };\n\n  // 删除决策动作\n  const deleteDecisionAction = (ruleId, decisionId, actionIndex) => {\n    setRules(rules.map(rule => {\n      if (rule.id === ruleId) {\n        const updatedDecisions = rule.decisions.map(decision => {\n          if (decision.id === decisionId) {\n            if (decision.actions.length <= 1) {\n              alert('至少需要保留一个动作');\n              return decision;\n            }\n            const updatedActions = [...decision.actions];\n            updatedActions.splice(actionIndex, 1);\n            return {\n              ...decision,\n              actions: updatedActions\n            };\n          }\n          return decision;\n        });\n        return {\n          ...rule,\n          decisions: updatedDecisions\n        };\n      }\n      return rule;\n    }));\n  };\n\n  // 添加新的决策项\n  const addNewDecision = ruleId => {\n    setRules(rules.map(rule => {\n      if (rule.id === ruleId) {\n        const newDecisionId = Math.max(...rule.decisions.map(d => d.id), 0) + 1;\n        return {\n          ...rule,\n          decisions: [...rule.decisions, {\n            id: newDecisionId,\n            name: `决策${newDecisionId}`,\n            actions: [{\n              type: 'SET',\n              key: '',\n              value: '',\n              target: 'ML_DECISION'\n            }]\n          }]\n        };\n      }\n      return rule;\n    }));\n  };\n\n  // 删除决策项\n  const deleteDecision = (ruleId, decisionId) => {\n    setRules(rules.map(rule => {\n      if (rule.id === ruleId) {\n        // 确保至少保留一个决策项\n        if (rule.decisions.length > 1) {\n          return {\n            ...rule,\n            decisions: rule.decisions.filter(d => d.id !== decisionId)\n          };\n        }\n      }\n      return rule;\n    }));\n  };\n\n  // 处理测试输入变更\n  const handleTestInputChange = e => {\n    setTestInput(e.target.value);\n  };\n\n  // 运行测试\n  const runTest = () => {\n    try {\n      const input = JSON.parse(testInput);\n      const results = rules.map(rule => {\n        try {\n          // 使用eval执行规则表达式，实际生产环境应使用更安全的方式\n          const age = input.age;\n          const balance = input.balance || 0;\n          const score = input.score || 0;\n          const hasBadRecord = input.hasBadRecord || false;\n          const level = input.level || '';\n          const points = input.points || 0;\n\n          // 处理level字符串比较\n          const processedExpression = rule.expression.replace(/level\\s*==\\s*([A-Z]+)/g, (match, p1) => `level == '${p1}'`);\n          const isMatch = eval(processedExpression);\n          return {\n            ruleName: rule.name,\n            expression: rule.expression,\n            matched: isMatch,\n            decision: isMatch ? rule.decisions[0].actions : []\n          };\n        } catch (error) {\n          return {\n            ruleName: rule.name,\n            expression: rule.expression,\n            matched: false,\n            error: error.message\n          };\n        }\n      });\n\n      // 生成测试轨迹\n      const trace = results.map(result => ({\n        ruleName: result.ruleName,\n        expression: result.expression,\n        passed: result.matched,\n        result: result.matched ? '通过' : result.error ? `错误: ${result.error}` : '未通过'\n      }));\n\n      // 找到第一个匹配的规则结果\n      const firstMatch = results.find(result => result.matched);\n      const finalResult = firstMatch ? '规则命中' : '未命中任何规则';\n      setTestResult({\n        results,\n        finalResult\n      });\n      setResultTrace(trace);\n      setShowTestResult(true);\n    } catch (error) {\n      alert('输入JSON格式错误: ' + error.message);\n    }\n  };\n\n  // 添加新规则\n  const addNewRule = () => {\n    const newId = Math.max(...rules.map(r => r.id)) + 1;\n    setRules([...rules, {\n      id: newId,\n      expression: '',\n      name: `规则${newId}`,\n      decisions: [{\n        id: newId,\n        name: `规则${newId}决策`,\n        actions: [{\n          type: 'SET',\n          key: '',\n          value: '',\n          target: 'ML_DECISION'\n        }]\n      }]\n    }]);\n  };\n\n  // 删除规则\n  const handleDeleteRule = id => {\n    if (rules.length <= 1) {\n      alert('至少需要保留一条规则');\n      return;\n    }\n    setRules(rules.filter(rule => rule.id !== id));\n  };\n\n  // 复制规则\n  const handleCopyRule = id => {\n    const ruleToCopy = rules.find(rule => rule.id === id);\n    if (!ruleToCopy) return;\n    const newId = Math.max(...rules.map(r => r.id)) + 1;\n    const newRule = {\n      ...ruleToCopy,\n      id: newId,\n      name: `${ruleToCopy.name} (复制)`,\n      decisions: ruleToCopy.decisions.map(decision => ({\n        ...decision,\n        id: newId,\n        name: `${decision.name} (复制)`\n      }))\n    };\n    setRules([...rules, newRule]);\n  };\n\n  // 处理拖拽结束事件\n  const handleDragEnd = result => {\n    // 如果拖拽被取消或者没有目标位置，则不执行任何操作\n    if (!result.destination) {\n      return;\n    }\n\n    // 如果拖拽的起始位置和目标位置相同，则不执行任何操作\n    if (result.destination.index === result.source.index) {\n      return;\n    }\n\n    // 创建新的规则数组，不修改原数组\n    const newRules = Array.from(rules);\n    // 移除拖拽的元素\n    const [removed] = newRules.splice(result.source.index, 1);\n    // 将拖拽的元素插入到新位置\n    newRules.splice(result.destination.index, 0, removed);\n\n    // 更新规则状态\n    setRules(newRules);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u89C4\\u5219\\u7EC4\\uFF1A\\u89C4\\u5219\\u7EC41\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary\",\n          children: \"\\u53D6\\u6D88\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary\",\n          children: \"\\u786E\\u5B9A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          children: \"\\u4FDD\\u5B58\\u5E76\\u542F\\u7528\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rule-editor\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"section-title\",\n        children: \"\\u89C4\\u5219\\u4E0E\\u51B3\\u7B56\\u7BA1\\u7406\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-container\",\n        children: /*#__PURE__*/_jsxDEV(DragDropContext, {\n          onDragEnd: handleDragEnd,\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"decision-table\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"table-column serial-column\",\n                  children: \"\\u5E8F\\u53F7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"table-column rule-column\",\n                  children: \"\\u89C4\\u5219\\u5217\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"table-column decision-column\",\n                  children: \"\\u51B3\\u7B56\\u5217\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"table-column action-column\",\n                  children: \"\\u64CD\\u4F5C\\u5217\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Droppable, {\n              droppableId: \"rules-table\",\n              children: provided => /*#__PURE__*/_jsxDEV(\"tbody\", {\n                ...provided.droppableProps,\n                ref: provided.innerRef,\n                children: [rules.map((rule, index) => /*#__PURE__*/_jsxDEV(Draggable, {\n                  draggableId: `rule-${rule.id}`,\n                  index: index,\n                  children: provided => /*#__PURE__*/_jsxDEV(\"tr\", {\n                    ref: provided.innerRef,\n                    ...provided.draggableProps,\n                    ...provided.dragHandleProps,\n                    className: \"table-row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"serial-cell\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"serial-number\",\n                        children: index + 1\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 323,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 322,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"rule-cell\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"rule-section\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"rule-item\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"rule-name-container\",\n                            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                              className: \"rule-prefix\",\n                              children: \"\\u65B0\\u89C4\\u5219\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 332,\n                              columnNumber: 37\n                            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                              type: \"text\",\n                              className: \"rule-name\",\n                              value: rule.name,\n                              onChange: e => updateRuleName(rule.id, e.target.value),\n                              placeholder: \"\\u89C4\\u5219\\u540D\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 333,\n                              columnNumber: 37\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 331,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"text\",\n                            className: \"rule-expression\",\n                            value: rule.expression,\n                            onChange: e => handleRuleExpressionChange(rule.id, e.target.value),\n                            placeholder: \"\\u8F93\\u5165\\u89C4\\u5219\\u8868\\u8FBE\\u5F0F\\uFF0C\\u4F8B\\u5982\\uFF1Aage >= 18\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 342,\n                            columnNumber: 35\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 329,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 328,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 327,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"decision-cell\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"decision-section\",\n                        children: rule.decisions.map(decision => /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"decision-item\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"decision-header\",\n                            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                              className: \"decision-type\",\n                              children: decision.name\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 359,\n                              columnNumber: 39\n                            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"decision-actions\",\n                              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                                className: \"btn btn-small btn-danger\",\n                                onClick: () => deleteDecision(rule.id, decision.id),\n                                disabled: rule.decisions.length <= 1,\n                                children: \"\\u5220\\u9664\\u51B3\\u7B56\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 361,\n                                columnNumber: 41\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 360,\n                              columnNumber: 39\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 358,\n                            columnNumber: 37\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"action-list\",\n                            children: decision.actions.map((action, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"action-row\",\n                              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                                className: \"action-select\",\n                                value: action.target,\n                                onChange: e => handleActionChange(rule.id, decision.id, idx, 'target', e.target.value),\n                                children: /*#__PURE__*/_jsxDEV(\"option\", {\n                                  value: \"ML_DECISION\",\n                                  children: \"ML_DECISION\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 378,\n                                  columnNumber: 45\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 373,\n                                columnNumber: 43\n                              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                                className: \"action-select\",\n                                value: action.type,\n                                onChange: e => handleActionChange(rule.id, decision.id, idx, 'type', e.target.value),\n                                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                                  value: \"SET\",\n                                  children: \"SET\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 385,\n                                  columnNumber: 45\n                                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                                  value: \"INCR\",\n                                  children: \"INCR\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 386,\n                                  columnNumber: 45\n                                }, this)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 380,\n                                columnNumber: 43\n                              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                                type: \"text\",\n                                className: \"action-input\",\n                                value: action.key,\n                                onChange: e => handleActionChange(rule.id, decision.id, idx, 'key', e.target.value),\n                                placeholder: \"key\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 388,\n                                columnNumber: 43\n                              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                                type: \"text\",\n                                className: \"action-input\",\n                                value: action.value,\n                                onChange: e => handleActionChange(rule.id, decision.id, idx, 'value', e.target.value),\n                                placeholder: \"value\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 395,\n                                columnNumber: 43\n                              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                                className: \"btn btn-small btn-danger\",\n                                onClick: () => deleteDecisionAction(rule.id, decision.id, idx),\n                                children: \"\\u5220\\u9664\\u52A8\\u4F5C\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 402,\n                                columnNumber: 43\n                              }, this)]\n                            }, idx, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 372,\n                              columnNumber: 41\n                            }, this))\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 370,\n                            columnNumber: 37\n                          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                            className: \"btn btn-small btn-secondary\",\n                            onClick: () => addNewDecisionAction(rule.id, decision.id),\n                            children: \"+ \\u6DFB\\u52A0\\u52A8\\u4F5C\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 411,\n                            columnNumber: 37\n                          }, this)]\n                        }, decision.id, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 357,\n                          columnNumber: 35\n                        }, this))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 355,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 354,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"action-cell\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"row-actions\",\n                        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"btn btn-small btn-secondary\",\n                          onClick: () => handleCopyRule(rule.id),\n                          children: \"\\u590D\\u5236\\u89C4\\u5219\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 425,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"btn btn-small btn-danger\",\n                          onClick: () => handleDeleteRule(rule.id),\n                          children: \"\\u5220\\u9664\\u89C4\\u5219\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 426,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 424,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 423,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 315,\n                    columnNumber: 27\n                  }, this)\n                }, rule.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 23\n                }, this)), provided.placeholder]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-secondary\",\n        onClick: addNewRule,\n        children: \"+ \\u6DFB\\u52A0\\u89C4\\u5219\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"test-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"section-title\",\n        children: \"\\u6D4B\\u8BD5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"test-input\",\n        value: testInput,\n        onChange: handleTestInputChange,\n        placeholder: \"\\u8F93\\u5165\\u6D4B\\u8BD5\\u6570\\u636E\\uFF0C\\u4F8B\\u5982\\uFF1A{ \\\"age\\\": 28 }\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: runTest,\n        children: \"\\u8FD0\\u884C\\u6D4B\\u8BD5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 9\n      }, this), testResult && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"test-results\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u6D4B\\u8BD5\\u7ED3\\u679C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 13\n        }, this), testResult.results.map((result, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"result-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"result-label\",\n              children: \"\\u89C4\\u5219:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"result-value\",\n              children: result.ruleName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"result-label\",\n              children: \"\\u8868\\u8FBE\\u5F0F:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 468,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"result-value\",\n              children: result.expression\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 467,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"result-label\",\n              children: \"\\u5339\\u914D\\u7ED3\\u679C:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"result-value\",\n              children: result.matched ? 'true' : 'false'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 17\n          }, this), result.error && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"result-label\",\n              children: \"\\u9519\\u8BEF:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"result-value\",\n              children: result.error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 19\n          }, this), result.decision && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"result-label\",\n              children: \"\\u6267\\u884C\\u51B3\\u7B56:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"result-value\",\n              children: JSON.stringify(result.decision, null, 2)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 19\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 281,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"o2WgSxq3/l4KZrSvXQwazOzJYUQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","DragDropContext","Droppable","Draggable","jsxDEV","_jsxDEV","App","_s","rules","setRules","id","name","expression","decisions","actions","type","key","value","target","testInput","setTestInput","testResult","setTestResult","showTestResult","setShowTestResult","resultTrace","setResultTrace","handleRuleExpressionChange","map","rule","updateRuleName","handleActionChange","ruleId","decisionId","actionIndex","field","updatedDecisions","decision","updatedActions","addNewDecisionAction","deleteDecisionAction","length","alert","splice","addNewDecision","newDecisionId","Math","max","d","deleteDecision","filter","handleTestInputChange","e","runTest","input","JSON","parse","results","age","balance","score","hasBadRecord","level","points","processedExpression","replace","match","p1","isMatch","eval","ruleName","matched","error","message","trace","result","passed","firstMatch","find","finalResult","addNewRule","newId","r","handleDeleteRule","handleCopyRule","ruleToCopy","newRule","handleDragEnd","destination","index","source","newRules","Array","from","removed","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onDragEnd","droppableId","provided","droppableProps","ref","innerRef","draggableId","draggableProps","dragHandleProps","onChange","placeholder","onClick","disabled","action","idx","stringify","_c","$RefreshReg$"],"sources":["/Users/viyondpay/opensource/dynamic_decision/front/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\n\nfunction App() {\n  // 修改数据结构：每个规则拥有自己的决策\n  const [rules, setRules] = useState([\n    {\n      id: 1, \n      name: '规则1', \n      expression: 'age >= 18', \n      decisions: [\n        {\n          id: 1,\n          name: '规则1决策',\n          actions: [\n            { type: 'SET', key: 'result', value: 'true', target: 'ML_DECISION' }\n          ]\n        }\n      ]\n    },\n    {\n      id: 2, \n      name: '规则2', \n      expression: 'age <= 18', \n      decisions: [\n        {\n          id: 2,\n          name: '规则2决策',\n          actions: [\n            { type: 'SET', key: 'result', value: 'false', target: 'ML_DECISION' },\n            { type: 'INCR', key: 'key', value: 'Value' }\n          ]\n        }\n      ]\n    }\n  ]);\n\n  const [testInput, setTestInput] = useState('{ \"age\": 28 }');\n  const [testResult, setTestResult] = useState(null);\n  const [showTestResult, setShowTestResult] = useState(false);\n  const [resultTrace, setResultTrace] = useState([]);\n\n  // 更新规则表达式\n  const handleRuleExpressionChange = (id, value) => {\n    setRules(rules.map(rule => \n      rule.id === id ? { ...rule, expression: value } : rule\n    ));\n  };\n\n  // 更新规则名称\n  const updateRuleName = (id, name) => {\n    setRules(rules.map(rule => \n      rule.id === id ? { ...rule, name } : rule\n    ));\n  };\n\n  // 处理动作变更\n  const handleActionChange = (ruleId, decisionId, actionIndex, field, value) => {\n    setRules(rules.map(rule => {\n      if (rule.id === ruleId) {\n        const updatedDecisions = rule.decisions.map(decision => {\n          if (decision.id === decisionId) {\n            const updatedActions = [...decision.actions];\n            updatedActions[actionIndex] = { ...updatedActions[actionIndex], [field]: value };\n            return { ...decision, actions: updatedActions };\n          }\n          return decision;\n        });\n        return { ...rule, decisions: updatedDecisions };\n      }\n      return rule;\n    }));\n  };\n\n  // 添加新的决策动作\n  const addNewDecisionAction = (ruleId, decisionId) => {\n    setRules(rules.map(rule => {\n      if (rule.id === ruleId) {\n        const updatedDecisions = rule.decisions.map(decision => {\n          if (decision.id === decisionId) {\n            return { \n              ...decision, \n              actions: [...decision.actions, { type: 'SET', key: '', value: '', target: 'ML_DECISION' }]\n            };\n          }\n          return decision;\n        });\n        return { ...rule, decisions: updatedDecisions };\n      }\n      return rule;\n    }));\n  };\n\n  // 删除决策动作\n  const deleteDecisionAction = (ruleId, decisionId, actionIndex) => {\n    setRules(rules.map(rule => {\n      if (rule.id === ruleId) {\n        const updatedDecisions = rule.decisions.map(decision => {\n          if (decision.id === decisionId) {\n            if (decision.actions.length <= 1) {\n              alert('至少需要保留一个动作');\n              return decision;\n            }\n            const updatedActions = [...decision.actions];\n            updatedActions.splice(actionIndex, 1);\n            return { ...decision, actions: updatedActions };\n          }\n          return decision;\n        });\n        return { ...rule, decisions: updatedDecisions };\n      }\n      return rule;\n    }));\n  };\n\n  // 添加新的决策项\n  const addNewDecision = (ruleId) => {\n    setRules(rules.map(rule => {\n      if (rule.id === ruleId) {\n        const newDecisionId = Math.max(...rule.decisions.map(d => d.id), 0) + 1;\n        return { \n          ...rule, \n          decisions: [...rule.decisions, {\n            id: newDecisionId,\n            name: `决策${newDecisionId}`,\n            actions: [{ type: 'SET', key: '', value: '', target: 'ML_DECISION' }]\n          }]\n        };\n      }\n      return rule;\n    }));\n  };\n\n  // 删除决策项\n  const deleteDecision = (ruleId, decisionId) => {\n    setRules(rules.map(rule => {\n      if (rule.id === ruleId) {\n        // 确保至少保留一个决策项\n        if (rule.decisions.length > 1) {\n          return { \n            ...rule, \n            decisions: rule.decisions.filter(d => d.id !== decisionId)\n          };\n        }\n      }\n      return rule;\n    }));\n  };\n\n  // 处理测试输入变更\n  const handleTestInputChange = (e) => {\n    setTestInput(e.target.value);\n  };\n\n  // 运行测试\n  const runTest = () => {\n    try {\n      const input = JSON.parse(testInput);\n      const results = rules.map(rule => {\n        try {\n          // 使用eval执行规则表达式，实际生产环境应使用更安全的方式\n          const age = input.age;\n          const balance = input.balance || 0;\n          const score = input.score || 0;\n          const hasBadRecord = input.hasBadRecord || false;\n          const level = input.level || '';\n          const points = input.points || 0;\n          \n          // 处理level字符串比较\n          const processedExpression = rule.expression.replace(/level\\s*==\\s*([A-Z]+)/g, (match, p1) => `level == '${p1}'`);\n          const isMatch = eval(processedExpression);\n          \n          return { \n            ruleName: rule.name, \n            expression: rule.expression, \n            matched: isMatch,\n            decision: isMatch ? rule.decisions[0].actions : []\n          };\n        } catch (error) {\n          return { \n            ruleName: rule.name, \n            expression: rule.expression, \n            matched: false,\n            error: error.message\n          };\n        }\n      });\n      \n      // 生成测试轨迹\n      const trace = results.map(result => ({\n        ruleName: result.ruleName,\n        expression: result.expression,\n        passed: result.matched,\n        result: result.matched ? '通过' : result.error ? `错误: ${result.error}` : '未通过'\n      }));\n      \n      // 找到第一个匹配的规则结果\n      const firstMatch = results.find(result => result.matched);\n      const finalResult = firstMatch ? '规则命中' : '未命中任何规则';\n      \n      setTestResult({ results, finalResult });\n      setResultTrace(trace);\n      setShowTestResult(true);\n    } catch (error) {\n      alert('输入JSON格式错误: ' + error.message);\n    }\n  };\n\n  // 添加新规则\n  const addNewRule = () => {\n    const newId = Math.max(...rules.map(r => r.id)) + 1;\n    setRules([...rules, { \n      id: newId, \n      expression: '', \n      name: `规则${newId}`,\n      decisions: [\n        {\n          id: newId,\n          name: `规则${newId}决策`,\n          actions: [\n            { type: 'SET', key: '', value: '', target: 'ML_DECISION' }\n          ]\n        }\n      ]\n    }]);\n  };\n\n  // 删除规则\n  const handleDeleteRule = (id) => {\n    if (rules.length <= 1) {\n      alert('至少需要保留一条规则');\n      return;\n    }\n    setRules(rules.filter(rule => rule.id !== id));\n  };\n\n  // 复制规则\n  const handleCopyRule = (id) => {\n    const ruleToCopy = rules.find(rule => rule.id === id);\n    if (!ruleToCopy) return;\n    \n    const newId = Math.max(...rules.map(r => r.id)) + 1;\n    const newRule = {\n      ...ruleToCopy,\n      id: newId,\n      name: `${ruleToCopy.name} (复制)`,\n      decisions: ruleToCopy.decisions.map(decision => ({\n        ...decision,\n        id: newId,\n        name: `${decision.name} (复制)`\n      }))\n    };\n    \n    setRules([...rules, newRule]);\n  };\n\n  // 处理拖拽结束事件\n  const handleDragEnd = (result) => {\n    // 如果拖拽被取消或者没有目标位置，则不执行任何操作\n    if (!result.destination) {\n      return;\n    }\n\n    // 如果拖拽的起始位置和目标位置相同，则不执行任何操作\n    if (result.destination.index === result.source.index) {\n      return;\n    }\n\n    // 创建新的规则数组，不修改原数组\n    const newRules = Array.from(rules);\n    // 移除拖拽的元素\n    const [removed] = newRules.splice(result.source.index, 1);\n    // 将拖拽的元素插入到新位置\n    newRules.splice(result.destination.index, 0, removed);\n\n    // 更新规则状态\n    setRules(newRules);\n  };\n\n  return (\n    <div className=\"app-container\">\n      <div className=\"header\">\n        <h1>规则组：规则组1</h1>\n        <div className=\"header-actions\">\n          <button className=\"btn btn-secondary\">取消</button>\n          <button className=\"btn btn-secondary\">确定</button>\n          <button className=\"btn btn-primary\">保存并启用</button>\n        </div>\n      </div>\n\n      <div className=\"rule-editor\">\n        <div className=\"section-title\">规则与决策管理</div>\n        \n        {/* 四列表格布局 */}\n        <div className=\"table-container\">\n          <DragDropContext onDragEnd={handleDragEnd}>\n            <table className=\"decision-table\">\n              <thead>\n                <tr>\n                  <th className=\"table-column serial-column\">序号</th>\n                  <th className=\"table-column rule-column\">规则列</th>\n                  <th className=\"table-column decision-column\">决策列</th>\n                  <th className=\"table-column action-column\">操作列</th>\n                </tr>\n              </thead>\n              <Droppable droppableId=\"rules-table\">\n                {(provided) => (\n                  <tbody\n                    {...provided.droppableProps}\n                    ref={provided.innerRef}\n                  >\n                    {rules.map((rule, index) => (\n                      <Draggable key={rule.id} draggableId={`rule-${rule.id}`} index={index}>\n                        {(provided) => (\n                          <tr\n                            ref={provided.innerRef}\n                            {...provided.draggableProps}\n                            {...provided.dragHandleProps}\n                            className=\"table-row\"\n                          >\n                            {/* 序号列 */}\n                            <td className=\"serial-cell\">\n                              <div className=\"serial-number\">{index + 1}</div>\n                            </td>\n                            \n                            {/* 规则列 */}\n                            <td className=\"rule-cell\">\n                              <div className=\"rule-section\">\n                                <div className=\"rule-item\">\n                                  {/* 规则名编辑 */}\n                                  <div className=\"rule-name-container\">\n                                    <span className=\"rule-prefix\">新规则</span>\n                                    <input\n                                      type=\"text\"\n                                      className=\"rule-name\"\n                                      value={rule.name}\n                                      onChange={(e) => updateRuleName(rule.id, e.target.value)}\n                                      placeholder=\"规则名\"\n                                    />\n                                  </div>\n                                  {/* 规则表达式编辑 */}\n                                  <input\n                                    type=\"text\"\n                                    className=\"rule-expression\"\n                                    value={rule.expression}\n                                    onChange={(e) => handleRuleExpressionChange(rule.id, e.target.value)}\n                                    placeholder=\"输入规则表达式，例如：age >= 18\"\n                                  />\n                                </div>\n                              </div>\n                            </td>\n                            \n                            {/* 决策列 */}\n                            <td className=\"decision-cell\">\n                              <div className=\"decision-section\">\n                                {rule.decisions.map((decision) => (\n                                  <div key={decision.id} className=\"decision-item\">\n                                    <div className=\"decision-header\">\n                                      <span className=\"decision-type\">{decision.name}</span>\n                                      <div className=\"decision-actions\">\n                                        <button \n                                          className=\"btn btn-small btn-danger\"\n                                          onClick={() => deleteDecision(rule.id, decision.id)}\n                                          disabled={rule.decisions.length <= 1}\n                                        >\n                                          删除决策\n                                        </button>\n                                      </div>\n                                    </div>\n                                    <div className=\"action-list\">\n                                      {decision.actions.map((action, idx) => (\n                                        <div key={idx} className=\"action-row\">\n                                          <select\n                                            className=\"action-select\"\n                                            value={action.target}\n                                            onChange={(e) => handleActionChange(rule.id, decision.id, idx, 'target', e.target.value)}\n                                          >\n                                            <option value=\"ML_DECISION\">ML_DECISION</option>\n                                          </select>\n                                          <select\n                                            className=\"action-select\"\n                                            value={action.type}\n                                            onChange={(e) => handleActionChange(rule.id, decision.id, idx, 'type', e.target.value)}\n                                          >\n                                            <option value=\"SET\">SET</option>\n                                            <option value=\"INCR\">INCR</option>\n                                          </select>\n                                          <input\n                                            type=\"text\"\n                                            className=\"action-input\"\n                                            value={action.key}\n                                            onChange={(e) => handleActionChange(rule.id, decision.id, idx, 'key', e.target.value)}\n                                            placeholder=\"key\"\n                                          />\n                                          <input\n                                            type=\"text\"\n                                            className=\"action-input\"\n                                            value={action.value}\n                                            onChange={(e) => handleActionChange(rule.id, decision.id, idx, 'value', e.target.value)}\n                                            placeholder=\"value\"\n                                          />\n                                          <button \n                                            className=\"btn btn-small btn-danger\"\n                                            onClick={() => deleteDecisionAction(rule.id, decision.id, idx)}\n                                          >\n                                            删除动作\n                                          </button>\n                                        </div>\n                                      ))}\n                                    </div>\n                                    <button \n                                      className=\"btn btn-small btn-secondary\"\n                                      onClick={() => addNewDecisionAction(rule.id, decision.id)}\n                                    >\n                                      + 添加动作\n                                    </button>\n                                  </div>\n                                ))}\n                              </div>\n                            </td>\n                            \n                            {/* 操作列 */}\n                            <td className=\"action-cell\">\n                              <div className=\"row-actions\">\n                                <button className=\"btn btn-small btn-secondary\" onClick={() => handleCopyRule(rule.id)}>复制规则</button>\n                                <button className=\"btn btn-small btn-danger\" onClick={() => handleDeleteRule(rule.id)}>删除规则</button>\n                              </div>\n                            </td>\n                          </tr>\n                        )}\n                      </Draggable>\n                    ))}\n                    {provided.placeholder}\n                  </tbody>\n                )}\n              </Droppable>\n            </table>\n          </DragDropContext>\n        </div>\n        \n        <button className=\"btn btn-secondary\" onClick={addNewRule}>\n          + 添加规则\n        </button>\n      </div>\n\n      <div className=\"test-section\">\n        <div className=\"section-title\">测试</div>\n        <textarea\n          className=\"test-input\"\n          value={testInput}\n          onChange={handleTestInputChange}\n          placeholder='输入测试数据，例如：{ \"age\": 28 }'\n        ></textarea>\n        <button className=\"btn btn-primary\" onClick={runTest}>\n          运行测试\n        </button>\n        \n        {testResult && (\n          <div className=\"test-results\">\n            <h3>测试结果</h3>\n            {testResult.results.map((result, index) => (\n              <div key={index} className=\"result-item\">\n                <div>\n                  <span className=\"result-label\">规则:</span>\n                  <span className=\"result-value\">{result.ruleName}</span>\n                </div>\n                <div>\n                  <span className=\"result-label\">表达式:</span>\n                  <span className=\"result-value\">{result.expression}</span>\n                </div>\n                <div>\n                  <span className=\"result-label\">匹配结果:</span>\n                  <span className=\"result-value\">{result.matched ? 'true' : 'false'}</span>\n                </div>\n                {result.error && (\n                  <div>\n                    <span className=\"result-label\">错误:</span>\n                    <span className=\"result-value\">{result.error}</span>\n                  </div>\n                )}\n                {result.decision && (\n                  <div>\n                    <span className=\"result-label\">执行决策:</span>\n                    <span className=\"result-value\">\n                      {JSON.stringify(result.decision, null, 2)}\n                    </span>\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}